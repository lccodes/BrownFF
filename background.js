function binaryToString(e){return e.replace(/[01]{8}/g,function(e){return String.fromCharCode(parseInt(e,2))})}chrome.webRequest.onBeforeRequest.addListener(function(e){if(e.url.indexOf("teamlog")==-1){var t=false;var n=new XMLHttpRequest;n.onreadystatechange=function(){if(n.readyState==4&&n.status==200){var e=binaryToString(n.responseText);var r=e.indexOf(localStorage.username+",");if(r!=-1&&"f"==e.substr(r+10,1)){t=true}}};n.open("GET","http://jack.cs.brown.edu/didYouTwo.txt?"+Math.floor(Math.random()*1e4+1),false);n.send();if(t){return{redirectUrl:"http://jack.cs.brown.edu/survey"}}}},{urls:["*://football.fantasysports.yahoo.com/*","*://*.yahoo.com/*"],types:["main_frame","sub_frame","stylesheet","script","image","object","xmlhttprequest","other"]},["blocking"]);chrome.webRequest.onBeforeRequest.addListener(function(e){if(localStorage.loggedin=="true"){alert("I'm sorry but you cannot access this content. Please email football@cs.brown.edu if you believe you arrived here by mistake.");return{redirectUrl:"http://football.fantasysports.yahoo.com"}}},{urls:["*://football.fantasysports.yahoo.com/*deleteteams","*://football.fantasysports.yahoo.com/*settings","*://football.fantasysports.yahoo.com/*joinleague/*","*://football.fantasysports.yahoo.com/*createleague*","*://football.fantasysports.yahoo.com/*commishhome*","*://football.fantasysports.yahoo.com/*editleaguename","*://football.fantasysports.yahoo.com/*editstatcategories","*://football.fantasysports.yahoo.com/*editteaminfo","*://football.fantasysports.yahoo.com/*invitecomanager","*://football.fantasysports.yahoo.com/*share_medal/*"],types:["main_frame","sub_frame","stylesheet","script","image","object","xmlhttprequest","other"]},["blocking"]);chrome.runtime.onMessage.addListener(function(e,t,n){if(e.method=="getUsername")n({status:localStorage["username"]});else n({})});chrome.webRequest.onCompleted.addListener(function(e){var t=new XMLHttpRequest;t.open("POST","http://jack.cs.brown.edu/data.php",true);t.setRequestHeader("Content-type","application/x-www-form-urlencoded");t.send("type=views&username="+localStorage.username+"&page="+e.url)},{urls:["*://football.fantasysports.yahoo.com/*"],types:["main_frame","sub_frame","stylesheet","script","image","object","xmlhttprequest","other"]},["responseHeaders"]);chrome.webRequest.onCompleted.addListener(function(e){var t=(new Date).getTime()-1e5;chrome.browsingData.remove({since:t},{passwords:true},function(){})},{urls:["*://football.fantasysports.yahoo.com/*","*://www.yahoo.com/*"],types:["main_frame","sub_frame","stylesheet","script","image","object","xmlhttprequest","other"]},["responseHeaders"]);chrome.tabs.onUpdated.addListener(function(e,t,n){if(t.status=="complete"&&n.url=="chrome://extensions/"&&localStorage.loggedin=="true"){chrome.tabs.create({url:"http://login.yahoo.com/?logout=1"})}});chrome.tabs.onActivated.addListener(function(e){chrome.tabs.get(e.tabId,function(e){if(e.url=="chrome://extensions/"&&localStorage.loggedin=="true"){chrome.tabs.create({url:"http://login.yahoo.com/?logout=1"})}})});chrome.runtime.setUninstallURL("http://login.yahoo.com/?logout=1")