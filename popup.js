function stringToBinary(e){return e.replace(/.{1}/g,function(e){var t=e.charCodeAt(0).toString(2);return"00000000".substring(0,8-t.length)+t})}function binaryToString(e){return e.replace(/[01]{8}/g,function(e){return String.fromCharCode(parseInt(e,2))})}function XOR(e){var t="";for(i=0;i<e.length;i++){if(e.charAt(i)=="0"){t=t+"1"}else{t=t+"0"}}return t}function signOn(){var e=$("#username").val()+",";var t=$("#password").val();var n=new XMLHttpRequest;n.onreadystatechange=function(){if(n.readyState==4&&n.status==200){var r=binaryToString(XOR(n.responseText));var i=r.indexOf(e);if(i!=-1&&t==r.substr(i+10,9)){chrome.storage.sync.set({username:$("#username").val()});chrome.storage.sync.set({loggedin:"true"});chrome.storage.sync.get("new",function(e){if("new"in e){localStorage.loggedin="true";localStorage.username=$("#username").val();alreadyIn();$("#forgot").hide()}else{$("#username").val("");$("#username").watermark("New Password");$("#password").hide();$("#login").text("Save Password");document.getElementById("login").onclick=changeP;$("#forgot").hide();$("p").text("Please change your password. Enter the new password below:")}})}else if(i!=-1){chrome.storage.sync.get("new",function(e){if("new"in e&&e["new"]==$("#password").val()){chrome.storage.sync.set({username:$("#username").val()});chrome.storage.sync.set({loggedin:"true"});localStorage.loggedin="true";localStorage.username=$("#username").val();alreadyIn();$("#forgot").hide()}else if(e["new"]==$("#password").val()){chrome.storage.sync.set({username:$("#username").val()});chrome.storage.sync.set({loggedin:"true"});localStorage.username=$("#username").val();$("#username").val("");$("#username").watermark("New Password");$("#password").hide();$("#login").text("Save Password");document.getElementById("login").onclick=changeP;$("#forgot").hide();$("p").text("Please change your password. Enter the new password below:")}})}}};n.open("GET","http://jack.cs.brown.edu/theTrueFile.txt?"+Math.floor(Math.random()*1e4+1),true);n.send()}function alreadyIn(){$("#username").hide();$("#password").hide();$("#login").text("Logout");document.getElementById("login").onclick=signOut;$("p").text("You are signed in. Feel free to go to");$(".link").text("fantasyfootball.yahoo.com");$(".link").click(function(){chrome.tabs.create({url:"https://login.yahoo.com"})});$("#forgot").hide();$("h1").text("Welcome BACK to BrownFF!")}function signOut(){localStorage.loggedin="false";chrome.storage.sync.set({loggedin:"false"});$("#forgot").show();$("#username").val("");$("#password").val("");$("#username").watermark("USERNAME");$("#password").watermark("PASSWORD");$("#username").show();$("#password").show();$(".link").hide();$("#login").text("Login");$("p").text("Please login in using your assigned username and password to proceed to your manager portal. \nIf you forgot your password, enter your username and click Forget Password.");$("h1").text("Welcome to Brown Fantasy Football!");document.getElementById("login").onclick=signOn;chrome.tabs.create({url:"http://login.yahoo.com/?logout=1"})}function forgotP(){chrome.storage.sync.get("username",function(e){if("username"in e&&$("#username").val()==e["username"]){chrome.storage.sync.get("new",function(e){$("p").text("Your password is "+e["new"])});$("#username").val("")}})}function changeP(){chrome.storage.sync.set({"new":$("#username").val()});chrome.storage.sync.set({loggedin:"true"});localStorage.loggedin="true";alreadyIn()}document.addEventListener("DOMContentLoaded",function(){document.getElementById("forgot").onclick=forgotP;if(localStorage.loggedin=="true"){alreadyIn()}else{$("#username").watermark("USERNAME");$("#password").watermark("PASSWORD");$("#login").text("Login");document.getElementById("login").onclick=signOn}})